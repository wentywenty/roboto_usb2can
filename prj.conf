# USB 配置 - 新版栈
# CONFIG_USB_DEVICE_STACK=y
CONFIG_USB_DEVICE_STACK_NEXT=y
CONFIG_USB_DEVICE_PRODUCT="roboparty CAN FD"
CONFIG_USB_DEVICE_MANUFACTURER="flora"
CONFIG_USB_DEVICE_VID=0x1D50
CONFIG_USB_DEVICE_PID=0x606F
CONFIG_USB_DEVICE_BOS=y
CONFIG_USB_DEVICE_INITIALIZE_AT_BOOT=n

# CAN 配置
CONFIG_CAN=y
CONFIG_CAN_FD_MODE=y
CONFIG_CAN_LOG_LEVEL_DBG=n

# gs_usb 支持 - 新版驱动
CONFIG_USBD_GS_USB=y
CONFIG_USBD_GS_USB_MAX_CHANNELS=2
CONFIG_USBD_GS_USB_LOG_LEVEL_DBG=n
CONFIG_USBD_GS_USB_IDENTIFICATION=n
CONFIG_USBD_GS_USB_TIMESTAMP=n
CONFIG_USBD_GS_USB_TERMINATION=n

# gs_usb 支持 - 旧版驱动
# CONFIG_USB_DEVICE_GS_USB=y
# CONFIG_USB_DEVICE_GS_USB_MAX_CHANNELS=2
# CONFIG_USB_DEVICE_GS_USB_LOG_LEVEL_DBG=y
# CONFIG_USB_DEVICE_GS_USB_IDENTIFICATION=y
# CONFIG_USB_DEVICE_GS_USB_TIMESTAMP=y
# CONFIG_USB_DEVICE_GS_USB_TERMINATION=n

# 日志
CONFIG_SERIAL=y
CONFIG_CONSOLE=y

CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=1
CONFIG_USE_SEGGER_RTT=n
CONFIG_RTT_CONSOLE=n
CONFIG_LOG_BACKEND_RTT=n

CONFIG_LOG_BACKEND_UART=y
CONFIG_UART_CONSOLE=y

CONFIG_DEPRECATION_TEST=y

# 内存优化 - 平衡配置(避免溢出)
CONFIG_USBD_GS_USB_POOL_SIZE=128  
CONFIG_HEAP_MEM_POOL_SIZE=49152    

# 线程优先级优化
CONFIG_USBD_GS_USB_RX_THREAD_PRIO=-1
CONFIG_USBD_GS_USB_TX_THREAD_PRIO=-1
CONFIG_USBD_GS_USB_RX_THREAD_STACK_SIZE=4096 
CONFIG_USBD_GS_USB_TX_THREAD_STACK_SIZE=4096 
CONFIG_MAIN_STACK_SIZE=2048                  
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048     

# UDC缓冲区
CONFIG_UDC_BUF_COUNT=64     
CONFIG_UDC_BUF_POOL_SIZE=16384 

# 禁用不必要功能
CONFIG_ASSERT=n
CONFIG_THREAD_NAME=n
CONFIG_THREAD_MONITOR=n